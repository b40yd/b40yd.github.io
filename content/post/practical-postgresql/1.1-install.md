+++
title = "PostgreSQL æ•°æ®åº“å®æˆ˜æŒ‡å— - å®‰è£… PostgreSQL 17ï¼ˆLinux/Windows/Dockerï¼‰"
lastmod = 2025-07-04
tags = ["PostgreSQL", "practical", "book", "install", "Linux", "Windows", "Docker"]
categories = ["PostgreSQL", "practical", "book", "install", "Linux", "Windows", "Docker"]
draft = false
author = "b40yd"
+++

# ç¬¬ä¸€ç«  PostgreSQL åŸºç¡€ä¸å®‰è£…é…ç½®
## ç¬¬ä¸€èŠ‚ å®‰è£… PostgreSQL 17ï¼ˆLinux / Windows / Dockerï¼‰

> **ç›®æ ‡**ï¼šæŒæ¡åœ¨ä¸åŒæ“ä½œç³»ç»Ÿå¹³å°ä¸‹å®‰è£… PostgreSQL 17 çš„æ–¹æ³•ï¼Œå¹¶å®ŒæˆåŸºç¡€ç¯å¢ƒé…ç½®ï¼Œä¸ºåç»­å­¦ä¹ å’Œå®æˆ˜æ‰“ä¸‹åšå®åŸºç¡€ã€‚

PostgreSQL æ˜¯ä¸€ä¸ªå¼€æºçš„ã€åŠŸèƒ½å¼ºå¤§çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚éšç€å…¶ç”Ÿæ€ç³»ç»Ÿçš„ä¸æ–­æ‰©å±•ï¼ŒPostgreSQL å·²æˆä¸ºä¼ä¸šçº§æ•°æ®æ¶æ„ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚æœ¬èŠ‚å°†è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨ Linuxã€Windows å’Œ Docker ç¯å¢ƒä¸­å®‰è£… PostgreSQL 17ï¼Œå¹¶ç®€è¦ä»‹ç»å®‰è£…åçš„åŸºæœ¬é…ç½®æµç¨‹ã€‚

---

## ğŸ§ ä¸€ã€åœ¨ Linux ä¸Šå®‰è£… PostgreSQL 17

ç›®å‰ä¸»æµ Linux å‘è¡Œç‰ˆï¼ˆå¦‚ Ubuntuã€CentOSã€Debianï¼‰éƒ½æä¾›äº†å®˜æ–¹æˆ–ç¬¬ä¸‰æ–¹æºæ”¯æŒ PostgreSQL å®‰è£…ã€‚

### 1. Ubuntu 22.04 LTS å®‰è£…æ­¥éª¤

```bash
# æ·»åŠ  PostgreSQL å®˜æ–¹ä»“åº“
sudo sh -c 'echo "deb https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'

# å¯¼å…¥ä»“åº“ç­¾åå¯†é’¥
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -

# æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨å¹¶å®‰è£… PostgreSQL 17
sudo apt update
sudo apt install postgresql-17

# å¯åŠ¨æœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯
sudo systemctl start postgresql
sudo systemctl enable postgresql
```

### 2. CentOS Stream 9 å®‰è£…æ­¥éª¤

```bash
# ä¸‹è½½å¹¶å®‰è£… PostgreSQL å®˜æ–¹ä»“åº“ RPM åŒ…
dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm

# ç¦ç”¨å†…ç½®æ¨¡å—å¹¶å¯ç”¨ PostgreSQL 17 æ¨¡å—
dnf -qy module disable postgresql
dnf install -y postgresql17-server

# åˆå§‹åŒ–æ•°æ®åº“å¹¶å¯åŠ¨æœåŠ¡
/usr/pgsql-17/bin/postgresql-17-setup initdb
systemctl enable postgresql-17
systemctl start postgresql-17
```

### âœ… å®‰è£…éªŒè¯

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status postgresql

# åˆ‡æ¢åˆ° postgres ç”¨æˆ·å¹¶è¿æ¥æ•°æ®åº“
sudo -i -u postgres
psql -c "SELECT version();"
```

---

## ğŸ’» äºŒã€åœ¨ Windows ä¸Šå®‰è£… PostgreSQL 17

PostgreSQL æä¾›äº†é€‚ç”¨äº Windows çš„å›¾å½¢åŒ–å®‰è£…ç¨‹åºï¼Œæ¨èä½¿ç”¨ [EnterpriseDB](https://www.enterprisedb.com/downloads/postgres-postgresql-downloads) æä¾›çš„å®‰è£…åŒ…ã€‚

### å®‰è£…æ­¥éª¤ï¼š

1. è®¿é—® [PostgreSQL å®˜æ–¹ä¸‹è½½é¡µé¢](https://www.postgresql.org/download/windows/)ï¼Œé€‰æ‹© â€œInteractive installer by EnterpriseDBâ€ã€‚
2. ä¸‹è½½å®‰è£…åŒ…å¹¶è¿è¡Œï¼š
   - é€‰æ‹©å®‰è£…è·¯å¾„ï¼ˆå»ºè®®é»˜è®¤ï¼‰
   - è®¾ç½® `postgres` è¶…çº§ç”¨æˆ·å¯†ç 
   - é€‰æ‹©ç»„ä»¶ï¼ˆå»ºè®®å…¨é€‰ï¼‰
   - è®¾ç½®ç«¯å£å·ï¼ˆé»˜è®¤ 5432ï¼‰
   - å¯åŠ¨æœåŠ¡å¹¶æ³¨å†Œä¸º Windows æœåŠ¡

### âœ… å®‰è£…éªŒè¯

1. æ‰“å¼€ `SQL Shell (psql)`ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼š

```sql
SELECT version();
```

2. ä½¿ç”¨ `pgAdmin 4` å›¾å½¢ç•Œé¢å·¥å…·ç®¡ç†æ•°æ®åº“ã€‚

---

## ğŸ³ ä¸‰ã€ä½¿ç”¨ Docker å®‰è£… PostgreSQL 17

Docker æ˜¯å¿«é€Ÿéƒ¨ç½² PostgreSQL çš„ç†æƒ³æ–¹å¼ï¼Œç‰¹åˆ«é€‚åˆå¼€å‘æµ‹è¯•ç¯å¢ƒã€‚

### å¯åŠ¨ PostgreSQL 17 å®¹å™¨ï¼š

```bash
docker run -d \
  --name postgres17 \
  -e POSTGRES_USER=admin \
  -e POSTGRES_PASSWORD=secret \
  -e POSTGRES_DB=mydb \
  -p 5432:5432 \
  postgres:17
```

### å‚æ•°è¯´æ˜ï¼š

| å‚æ•° | è¯´æ˜ |
|------|------|
| `-d` | åå°è¿è¡Œå®¹å™¨ |
| `--name` | å®¹å™¨åç§° |
| `-e POSTGRES_USER` | è®¾ç½®ç®¡ç†å‘˜ç”¨æˆ·å |
| `-e POSTGRES_PASSWORD` | è®¾ç½®ç®¡ç†å‘˜å¯†ç  |
| `-e POSTGRES_DB` | åˆ›å»ºé»˜è®¤æ•°æ®åº“ |
| `-p` | æ˜ å°„å®¿ä¸»æœºç«¯å£ |

### âœ… å®‰è£…éªŒè¯

è¿›å…¥å®¹å™¨å†…éƒ¨æ‰§è¡ŒæŸ¥è¯¢ï¼š

```bash
docker exec -it postgres17 psql -U admin -d mydb
```

åœ¨ psql ä¸­è¾“å…¥ï¼š

```sql
SELECT version();
```

---

## âš™ï¸ å››ã€å®‰è£…ååŸºç¡€é…ç½®å»ºè®®

æ— è®ºä½ ä½¿ç”¨å“ªç§æ–¹å¼å®‰è£… PostgreSQLï¼Œéƒ½å»ºè®®è¿›è¡Œä»¥ä¸‹åŸºç¡€é…ç½®ä»¥ç¡®ä¿å®‰å…¨æ€§å’Œå¯ç”¨æ€§ï¼š

### 1. ä¿®æ”¹ç›‘å¬åœ°å€ï¼ˆå…è®¸è¿œç¨‹è®¿é—®ï¼‰

ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸ä½äº `/etc/postgresql/17/main/postgresql.conf` æˆ–ç±»ä¼¼è·¯å¾„ï¼‰ï¼š

```conf
listen_addresses = '*'
```

### 2. é…ç½®è¿œç¨‹è¿æ¥æƒé™

ç¼–è¾‘ `pg_hba.conf` æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹è§„åˆ™ä»¥å…è®¸ç‰¹å®š IP è¿æ¥ï¼š

```conf
host    all             all             192.168.1.0/24        md5
```

é‡å¯ PostgreSQL æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆï¼š

```bash
sudo systemctl restart postgresql
```

### 3. åˆ›å»ºæ–°ç”¨æˆ·ä¸æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰

```bash
sudo -i -u postgres
createuser --interactive
createdb myproject
```

---

## ğŸ“Œ å°ç»“

| å¹³å° | ä¼˜ç‚¹ | æ¨èåœºæ™¯ |
|------|------|----------|
| Linux | çµæ´»ã€å¯æ§æ€§å¼º | ç”Ÿäº§ç¯å¢ƒã€æœåŠ¡å™¨éƒ¨ç½² |
| Windows | å›¾å½¢ç•Œé¢å‹å¥½ | å¼€å‘è€…æœ¬åœ°è°ƒè¯• |
| Docker | å¿«é€Ÿéƒ¨ç½²ã€éš”ç¦»æ€§å¥½ | æµ‹è¯•ç¯å¢ƒã€CI/CD æµç¨‹ |

é€šè¿‡æœ¬èŠ‚çš„å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»èƒ½å¤Ÿåœ¨å¤šç§å¹³å°ä¸ŠæˆåŠŸå®‰è£… PostgreSQL 17ï¼Œå¹¶å®Œæˆäº†åŸºç¡€é…ç½®ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿›ä¸€æ­¥äº†è§£ PostgreSQL çš„æ ¸å¿ƒå·¥å…· `psql` ä»¥åŠå›¾å½¢åŒ–å®¢æˆ·ç«¯çš„ä½¿ç”¨ã€‚
